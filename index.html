<html>
<head>
		<style>
			body {
				font-family: Monospace;
				background-color: #555555;
				margin: 0px;
				overflow: hidden;
			}
		</style>
</head>
<body>
<script src="scripts/three.min.js">
</script>
<script>
    var container;

    var camera, scene, renderer;
    var pointLight;
    
    var sphereRadius = 50;
    
    // this is a dictionnary of joints by player, formatted as such: <playerId, <jointName, sphere>>
    var playersJoints = {};
    
    var dummyPlayers = {
        "Player1": {
            "Knee": {"x": 0, "y": 0, "z": 0},
            "Head": {"x": 0, "y": 100, "z": 0},
            "RightHand": {"x": 100, "y": 50, "z": 0},
        }
    };

    init();
    animate();    

    function drawSphere(playerId, jointName, x, y, z, color)
    {
        if (!(playerId in playersJoints))
            playersJoints[playerId] = {};
        if (!(jointName in playersJoints[playerId]))
        {
            material = new THREE.MeshLambertMaterial( { color: color, shading: THREE.SmoothShading } );
        
            var geometry = new THREE.SphereGeometry( sphereRadius, 32, 16 );
            var sphere = new THREE.Mesh( geometry, material );

            sphere.position.x = x;
            sphere.position.y = y;
            sphere.position.z = z;

            scene.add(sphere);
            playersJoints[playerId][jointName] = sphere;
        }
        else
        {
            var sphere = playersJoints[playerId][jointName];
            sphere.position.x = x;
            sphere.position.y = y;
            sphere.position.z = y;
        }
    }
    
    function drawPlayer(playerId, player)
    {
        for (var jointName in player)
        {
            pos = player[jointName];
            drawSphere(playerId, jointName, pos.x, pos.y, pos.z, 0xFF0000);
        }
    }
    
    function init() 
    {
        container = document.createElement( 'div' );
        document.body.appendChild( container );

        camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
        camera.position.set( 0, 200, 800 );

        scene = new THREE.Scene();

        drawPlayer("Player1", dummyPlayers["Player1"]);
        // Lights
        pointLight = new THREE.PointLight( 0xffffff, 1 );
        scene.add( pointLight );
        
        // Lights
        scene.add( new THREE.AmbientLight( 0x111111 ) );

        renderer = new THREE.WebGLRenderer( { antialias: true } );
        renderer.setSize( window.innerWidth, window.innerHeight );
        container.appendChild( renderer.domElement );

        window.addEventListener( 'resize', onWindowResize, false );
    }

    function onWindowResize()
    {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );
    }

    
    function animate() 
    {
        requestAnimationFrame( animate );
        render();
    }

    function render() 
    {
        var timer = 0.0001 * Date.now();

        camera.position.x = Math.cos( timer ) * 1000;
        camera.position.z = Math.sin( timer ) * 1000;

        camera.lookAt( scene.position );
        
        pointLight.position.x = Math.sin( timer * 7 ) * 300;
        pointLight.position.y = Math.cos( timer * 5 ) * 400;
        pointLight.position.z = Math.cos( timer * 3 ) * 300;
       
        dummyPlayers["Player1"]["Head"].x += 5;
        drawPlayer("Player1", dummyPlayers["Player1"]);
       
        renderer.render( scene, camera );
    }

</script>
</body>
</html>